<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Hello World | Robin Firth</title>
<meta name="keywords" content="" />
<meta name="description" content="This is the first in hopefully a long series of posts in Arduino development as I learn about embedded development, microcontrollers, and electrical engineering.
The hardware The target hardware for the experimentation will be this very Arduino Uno
And, a quick look at the back will tell us that this is the R3 model
However I believe any Arduino Uno model, as well as a few other Arduinos will work with the methods and APIs we&rsquo;re using">
<meta name="author" content="">
<link rel="canonical" href="https://forgottenmaster.github.io/posts/arduino/helloworld/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.6f60056d44d3f7eb69a4bc6c332b59960f3a995802bded244750232f33713c49.css" integrity="sha256-b2AFbUTT9&#43;tppLxsMytZlg86mVgCve0kR1AjLzNxPEk=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://forgottenmaster.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://forgottenmaster.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://forgottenmaster.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://forgottenmaster.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://forgottenmaster.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.92.2" />
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><meta property="og:title" content="Hello World" />
<meta property="og:description" content="This is the first in hopefully a long series of posts in Arduino development as I learn about embedded development, microcontrollers, and electrical engineering.
The hardware The target hardware for the experimentation will be this very Arduino Uno
And, a quick look at the back will tell us that this is the R3 model
However I believe any Arduino Uno model, as well as a few other Arduinos will work with the methods and APIs we&rsquo;re using" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://forgottenmaster.github.io/posts/arduino/helloworld/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-24T00:37:11&#43;01:00" />
<meta property="article:modified_time" content="2022-04-24T00:37:11&#43;01:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Hello World"/>
<meta name="twitter:description" content="This is the first in hopefully a long series of posts in Arduino development as I learn about embedded development, microcontrollers, and electrical engineering.
The hardware The target hardware for the experimentation will be this very Arduino Uno
And, a quick look at the back will tell us that this is the R3 model
However I believe any Arduino Uno model, as well as a few other Arduinos will work with the methods and APIs we&rsquo;re using"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://forgottenmaster.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Arduino",
      "item": "https://forgottenmaster.github.io/posts/arduino/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Hello World",
      "item": "https://forgottenmaster.github.io/posts/arduino/helloworld/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Hello World",
  "name": "Hello World",
  "description": "This is the first in hopefully a long series of posts in Arduino development as I learn about embedded development, microcontrollers, and electrical engineering.\nThe hardware The target hardware for the experimentation will be this very Arduino Uno\nAnd, a quick look at the back will tell us that this is the R3 model\nHowever I believe any Arduino Uno model, as well as a few other Arduinos will work with the methods and APIs we\u0026rsquo;re using",
  "keywords": [
    
  ],
  "articleBody": "This is the first in hopefully a long series of posts in Arduino development as I learn about embedded development, microcontrollers, and electrical engineering.\nThe hardware The target hardware for the experimentation will be this very Arduino Uno\nAnd, a quick look at the back will tell us that this is the R3 model\nHowever I believe any Arduino Uno model, as well as a few other Arduinos will work with the methods and APIs we’re using\nThe second component we will need is the cable to connect the Arduino to the computer, this is a male USB-A (plugs into the computer) to USB-B (plugs into Arduino) cable\nThis will be all that is needed to set up the environment and a “Hello, World!” application, but obviously as we go through different projects, etc. we’ll require more peripherals.\nThe coding environment We will be using Rust for all Arduino development which has the ability to compile to various embedded target platforms.\nMore generically, Rust has the ability to compile for any target platform for which LLVM supports, and a linker is available for.\nRust is a systems programming language rivalling C and due to the language itself being more expressive (such as expressing ownership), has a very good optimising compiler.\nThe Rust environment is easy to install, simply follow the directions provided on the Rustup website which will install Cargo and the Rust compiler.\nThe repository All of the code for this Arduino experimentation will be put in the Arduino Uno repository.\nThis repository is setup with Github workflows to check compilation and formatting on code submission, similar to my other repositories, except I’ve removed code coverage and testing workflows.\nDependencies There are a few dependencies that need to be set up on the development machine to support Arduino development. These are detailed below.\nAVR As mentioned previously, the Rust compiler is able to compile to any platform that LLVM supports, however requires an appropriate linker to be present on the system.\nIn the case of AVR development, we will need to make sure we install the tools for an AVR development environment.\nOn linux, these can be installed with the following command\nsudo apt install avr-libc gcc-avr pkg-config avrdude\rOn windows, the process is a little more involved, but not exactly difficult.\n Install the WinAVR package, which sets up an AVR development environment. The WinAVR package can be found HERE WinAVR is a little out of date, in particular the version of avrdude is too old for us to use with the library we’re going to be using. Download the latest version of avrdude from HERE and replace the avrdude.exe binary with it  Ravedude Ravedude is a program which handles flashing the compiled program onto the device. With Ravedude installed, running\ncargo run\rin a project that is setup to compile AVR executables will result in the executable being built, and then pushed to a connected device.\nTo set this up on either Windows or Linux (or any other OS), it can be installed through Cargo with the command\ncargo +stable install ravedude\rCreating the project The API we will be using is called avr-hal which stands for AVR Hardware Abstraction Layer.\nA HAL will handle mapping coding structures (such as an enum of pins) to the actual pins on a device. It’s intended that a HAL will abstract the hardware from the coder, leaving them to focus only on what they want it to do.\nThe author provides a neat template that can be used with cargo-generate to create the project.\nTo create a project with this method, simply install the cargo-generate program, conveniently through Cargo itself:\ncargo install cargo-generate\rSecondly invoke it as such:\ncargo generate --git https://github.com/Rahix/avr-hal-template.git\rIt will ask for the project name, and the target Arduino device (I chose Arduino Uno).\nRunning the project Thanks to the HAL, and Ravedude, it’s easy to build and run the generated project.\nFirstly, plug the Arduino device into the computer.\nSecondly, run the following command\ncargo run --release\rThis will compile the sample program, and push the executable to the Arduino, resulting in a lovely little flashing light as shown in the video below\nThere should have been a video here but your browser does not seem\rto support it.\r ",
  "wordCount" : "713",
  "inLanguage": "en",
  "datePublished": "2022-04-24T00:37:11+01:00",
  "dateModified": "2022-04-24T00:37:11+01:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://forgottenmaster.github.io/posts/arduino/helloworld/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Robin Firth",
    "logo": {
      "@type": "ImageObject",
      "url": "https://forgottenmaster.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://forgottenmaster.github.io/" accesskey="h" title="Robin Firth (Alt + H)">Robin Firth</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://forgottenmaster.github.io/resume/" title="Résumé">
                    <span>Résumé</span>
                </a>
            </li>
            <li>
                <a href="https://forgottenmaster.github.io/posts/" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
            <li>
                <a href="https://forgottenmaster.github.io/archives/" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://forgottenmaster.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://forgottenmaster.github.io/posts/">Posts</a>&nbsp;»&nbsp;<a href="https://forgottenmaster.github.io/posts/arduino/">Arduino</a></div>
    <h1 class="post-title">
      Hello World
    </h1>
    <div class="post-meta"><span title='2022-04-24 00:37:11 +0100 BST'>April 24, 2022</span>&nbsp;·&nbsp;4 min

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#the-hardware" aria-label="The hardware">The hardware</a></li>
                <li>
                    <a href="#the-coding-environment" aria-label="The coding environment">The coding environment</a></li>
                <li>
                    <a href="#the-repository" aria-label="The repository">The repository</a></li>
                <li>
                    <a href="#dependencies" aria-label="Dependencies">Dependencies</a><ul>
                        
                <li>
                    <a href="#avr" aria-label="AVR">AVR</a></li>
                <li>
                    <a href="#ravedude" aria-label="Ravedude">Ravedude</a></li></ul>
                </li>
                <li>
                    <a href="#creating-the-project" aria-label="Creating the project">Creating the project</a></li>
                <li>
                    <a href="#running-the-project" aria-label="Running the project">Running the project</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>This is the first in hopefully a long series of posts in Arduino development as I learn about embedded development, microcontrollers, and electrical engineering.</p>
<h3 id="the-hardware">The hardware<a hidden class="anchor" aria-hidden="true" href="#the-hardware">#</a></h3>
<p>The target hardware for the experimentation will be this very Arduino Uno</p>
<p><img loading="lazy" src="arduino_front.jpg" alt="Arduino Uno Front"  />
</p>
<p>And, a quick look at the back will tell us that this is the R3 model</p>
<p><img loading="lazy" src="arduino_back.jpg" alt="Arduino Uno Back"  />
</p>
<p>However I believe any Arduino Uno model, as well as a few other Arduinos will work with the methods and APIs we&rsquo;re using</p>
<p>The second component we will need is the cable to connect the Arduino to the computer, this is a male USB-A (plugs into the computer) to USB-B (plugs into Arduino) cable</p>
<p><img loading="lazy" src="cable.jpg" alt="Arduino Cable"  />
</p>
<p>This will be all that is needed to set up the environment and a &ldquo;Hello, World!&rdquo; application, but obviously as we go through different projects, etc. we&rsquo;ll require more peripherals.</p>
<h3 id="the-coding-environment">The coding environment<a hidden class="anchor" aria-hidden="true" href="#the-coding-environment">#</a></h3>
<p>We will be using Rust for all Arduino development which has the ability to compile to various embedded target platforms.</p>
<p>More generically, Rust has the ability to compile for any target platform for which LLVM supports, and a linker is available for.</p>
<p>Rust is a systems programming language rivalling C and due to the language itself being more expressive (such as expressing ownership), has a very good optimising compiler.</p>
<p>The Rust environment is easy to install, simply follow the directions provided on the <a href="https://rustup.rs/">Rustup</a> website which will install Cargo and the Rust compiler.</p>
<h3 id="the-repository">The repository<a hidden class="anchor" aria-hidden="true" href="#the-repository">#</a></h3>
<p>All of the code for this Arduino experimentation will be put in the <a href="https://github.com/ForgottenMaster/arduino-uno">Arduino Uno</a> repository.</p>
<p>This repository is setup with Github workflows to check compilation and formatting on code submission, similar to my other repositories, except I&rsquo;ve removed code coverage and testing workflows.</p>
<h3 id="dependencies">Dependencies<a hidden class="anchor" aria-hidden="true" href="#dependencies">#</a></h3>
<p>There are a few dependencies that need to be set up on the development machine to support Arduino development. These are detailed below.</p>
<h4 id="avr">AVR<a hidden class="anchor" aria-hidden="true" href="#avr">#</a></h4>
<p>As mentioned previously, the Rust compiler is able to compile to any platform that LLVM supports, however requires an appropriate linker to be present on the system.</p>
<p>In the case of AVR development, we will need to make sure we install the tools for an AVR development environment.</p>
<p>On linux, these can be installed with the following command</p>
<pre tabindex="0"><code>sudo apt install avr-libc gcc-avr pkg-config avrdude
</code></pre><p>On windows, the process is a little more involved, but not exactly difficult.</p>
<ol>
<li>Install the WinAVR package, which sets up an AVR development environment. The WinAVR package can be found <a href="https://sourceforge.net/projects/winavr/files/">HERE</a></li>
<li>WinAVR is a little out of date, in particular the version of avrdude is too old for us to use with the library we&rsquo;re going to be using. Download the latest version of avrdude from <a href="https://github.com/mariusgreuel/avrdude/releases">HERE</a> and replace the <strong>avrdude.exe</strong> binary with it</li>
</ol>
<h4 id="ravedude">Ravedude<a hidden class="anchor" aria-hidden="true" href="#ravedude">#</a></h4>
<p>Ravedude is a program which handles flashing the compiled program onto the device. With Ravedude installed, running</p>
<pre tabindex="0"><code>cargo run
</code></pre><p>in a project that is setup to compile AVR executables will result in the executable being built, and then pushed to a connected device.</p>
<p>To set this up on either Windows or Linux (or any other OS), it can be installed through Cargo with the command</p>
<pre tabindex="0"><code>cargo +stable install ravedude
</code></pre><h3 id="creating-the-project">Creating the project<a hidden class="anchor" aria-hidden="true" href="#creating-the-project">#</a></h3>
<p>The API we will be using is called <a href="https://github.com/Rahix/avr-hal">avr-hal</a> which stands for <strong>AVR Hardware Abstraction Layer</strong>.</p>
<p>A HAL will handle mapping coding structures (such as an enum of pins) to the actual pins on a device. It&rsquo;s intended that a HAL will abstract the hardware from the coder, leaving them to focus only on what they want it to do.</p>
<p>The author provides a neat template that can be used with <strong>cargo-generate</strong> to create the project.</p>
<p>To create a project with this method, simply install the cargo-generate program, conveniently through Cargo itself:</p>
<pre tabindex="0"><code>cargo install cargo-generate
</code></pre><p>Secondly invoke it as such:</p>
<pre tabindex="0"><code>cargo generate --git https://github.com/Rahix/avr-hal-template.git
</code></pre><p>It will ask for the project name, and the target Arduino device (I chose Arduino Uno).</p>
<h3 id="running-the-project">Running the project<a hidden class="anchor" aria-hidden="true" href="#running-the-project">#</a></h3>
<p>Thanks to the HAL, and Ravedude, it&rsquo;s easy to build and run the generated project.</p>
<p>Firstly, plug the Arduino device into the computer.</p>
<p>Secondly, run the following command</p>
<pre tabindex="0"><code>cargo run --release
</code></pre><p>This will compile the sample program, and push the executable to the Arduino, resulting in a lovely little flashing light as shown in the video below</p>
<video style="max-width: 100%" class="video-shortcode" preload="auto" controls>
    <source src="demo.mp4" type="video/mp4">
    There should have been a video here but your browser does not seem
    to support it.
</video>


  </div>

  <footer class="post-footer">
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://forgottenmaster.github.io/">Robin Firth</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
